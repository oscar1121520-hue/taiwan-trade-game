<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å¤§èˆªæµ·æ™‚ä»£ï¼šå°ç£è½‰å£è²¿æ˜“æŒ‘æˆ°</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: #f4e4bc; display: flex; flex-direction: column; align-items: center; }
        h1 { color: #5d4037; }
        #timer { font-size: 24px; font-weight: bold; color: #d32f2f; margin-bottom: 10px; }
        
        .game-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; max-width: 1000px; }
        .region-card { background: #fff; border: 2px solid #8d6e63; border-radius: 10px; padding: 15px; width: 300px; box-shadow: 3px 3px 10px rgba(0,0,0,0.1); }
        .region-title { text-align: center; font-weight: bold; font-size: 1.2em; margin-bottom: 10px; color: #3e2723; border-bottom: 2px solid #eee; }
        
        .drop-zone { min-height: 60px; background: #fdf5e6; border: 2px dashed #bcaaa4; margin: 10px 0; padding: 10px; border-radius: 5px; display: flex; flex-wrap: wrap; gap: 5px; }
        .drop-zone-title { font-size: 0.9em; color: #795548; }

        .items-pool { background: #fff; border: 2px solid #5d4037; padding: 20px; border-radius: 10px; margin-top: 20px; width: 80%; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .item { background: #8d6e63; color: white; padding: 8px 15px; border-radius: 20px; cursor: grab; user-select: none; font-size: 14px; }
        .item:active { cursor: grabbing; }

        #submit-btn { margin-top: 20px; padding: 10px 30px; font-size: 18px; background-color: #388e3c; color: white; border: none; border-radius: 5px; cursor: pointer; }
        #submit-btn:hover { background-color: #2e7d32; }
    </style>
</head>
<body>

    <h1>ğŸš¢ å¤§èˆªæµ·æ™‚ä»£ï¼šå°ç£è²¿æ˜“è€ƒé©—</h1>
    <div id="timer">å‰©é¤˜æ™‚é–“ï¼š02:00</div>

    <div class="game-container">
        <div class="region-card">
            <div class="region-title">ğŸ‡¨ğŸ‡³ ä¸­åœ‹</div>
            <div class="drop-zone-title">å°ç£è¼¸å‡ºè‡³ä¸­åœ‹ (2é …)ï¼š</div>
            <div class="drop-zone" id="tw-to-cn" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone-title">å¾ä¸­åœ‹è¼¸å…¥è‡³å°ç£ (3é …)ï¼š</div>
            <div class="drop-zone" id="cn-to-tw" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>

        <div class="region-card">
            <div class="region-title">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</div>
            <div class="drop-zone-title">å°ç£è¼¸å‡ºè‡³æ—¥æœ¬ (2é …)ï¼š</div>
            <div class="drop-zone" id="tw-to-jp" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone-title">å¾æ—¥æœ¬è¼¸å…¥è‡³å°ç£ (2é …)ï¼š</div>
            <div class="drop-zone" id="jp-to-tw" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>

        <div class="region-card">
            <div class="region-title">ğŸŒ´ æ±å—äº</div>
            <div class="drop-zone-title">å°ç£è¼¸å‡ºè‡³æ±å—äº (3é …)ï¼š</div>
            <div class="drop-zone" id="tw-to-sea" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone-title">å¾æ±å—äºè¼¸å…¥è‡³å°ç£ (3é …)ï¼š</div>
            <div class="drop-zone" id="sea-to-tw" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>
    </div>

    <div class="items-pool" id="items-pool" ondrop="drop(event)" ondragover="allowDrop(event)">
        </div>

    <button id="submit-btn" onclick="checkAnswers()">æäº¤ç­”æ¡ˆ</button>

    <script>
        const correctAnswers = {
            "tw-to-cn": ["é¦™æ–™", "éŠ€"],
            "cn-to-tw": ["ç“·å™¨", "çµ²ç¶¢", "è—¥æ"],
            "tw-to-sea": ["è”—ç³–", "ç“·å™¨", "çµ²ç¶¢"],
            "sea-to-tw": ["è»éœ€å“", "é¦™æ–™", "å¸ƒåŒ¹"],
            "tw-to-jp": ["è”—ç³–", "é¹¿çš®"],
            "jp-to-tw": ["éŠ€", "è»éœ€å“"]
        };

        const allItems = ["é¦™æ–™", "éŠ€", "ç“·å™¨", "çµ²ç¶¢", "è—¥æ", "è”—ç³–", "ç“·å™¨", "çµ²ç¶¢", "è»éœ€å“", "é¦™æ–™", "å¸ƒåŒ¹", "è”—ç³–", "é¹¿çš®", "éŠ€", "è»éœ€å“"];

        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            const pool = document.getElementById('items-pool');
            // æ‰“äº‚é †åº
            const shuffled = allItems.sort(() => Math.random() - 0.5);
            shuffled.forEach((name, index) => {
                const div = document.createElement('div');
                div.className = 'item';
                div.draggable = true;
                div.id = 'item-' + index;
                div.innerText = name;
                div.ondragstart = drag;
                pool.appendChild(div);
            });
            startTimer();
        }

        // æ‹–æ”¾åŠŸèƒ½
        function allowDrop(ev) { ev.preventDefault(); }
        function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            if (ev.target.classList.contains('drop-zone') || ev.target.id === 'items-pool') {
                ev.target.appendChild(draggedElement);
            }
        }

        // è¨ˆæ™‚å™¨
        let timeLeft = 120;
        function startTimer() {
            const timerDisplay = document.getElementById('timer');
            const countdown = setInterval(() => {
                timeLeft--;
                let mins = Math.floor(timeLeft / 60);
                let secs = timeLeft % 60;
                timerDisplay.innerText = `å‰©é¤˜æ™‚é–“ï¼š0${mins}:${secs < 10 ? '0' : ''}${secs}`;
                
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    alert("æ™‚é–“åˆ°ï¼æŒ‘æˆ°å¤±æ•—ã€‚");
                    location.reload();
                }
            }, 1000);
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswers() {
            let isAllCorrect = true;
            for (let zoneId in correctAnswers) {
                const zone = document.getElementById(zoneId);
                const currentItems = Array.from(zone.children).map(item => item.innerText);
                const targetItems = [...correctAnswers[zoneId]];
                
                // æ’åºå¾Œæ¯”è¼ƒå…§å®¹
                if (currentItems.sort().join(',') !== targetItems.sort().join(',')) {
                    isAllCorrect = false;
                    break;
                }
            }

            if (isAllCorrect) {
                alert("æ­å–œï¼ä½ å®Œå…¨æ­£ç¢ºï¼ŒæˆåŠŸæŒæ¡å¤§èˆªæµ·æ™‚ä»£çš„è²¿æ˜“ï¼");
            } else {
                alert("ç­”æ¡ˆæœ‰èª¤æˆ–å°šæœªå®Œæˆï¼Œè«‹å†æ¥å†å²ï¼");
            }
        }

        window.onload = initGame;
    </script>
</body>
</html>